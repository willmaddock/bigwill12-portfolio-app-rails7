<p style="color: green"><%= notice %></p> <!-- Display any notice message in green -->

<h1>Students</h1> <!-- Header for the students page -->

<%= form_with(url: students_path, method: :get, local: true, class: "form-inline") do |form| %>
  <!-- Create a form to search students by major -->
  <div>
    <%= form.label :major, "Select Major", class: "form-label" %>
    <%= form.select :major, options_for_select(Student::VALID_MAJORS), { prompt: "Any Major" }, name: 'search[major]', class: "form-control" %>
  </div>

  <!-- Form for graduation date -->
  <div>
    <%= form.label :graduation_date, "Graduation Date", class: "form-label" %>
    <%= form.date_field 'search[graduation_date]', class: "form-control" %>
  </div>

  <!-- Radio buttons to filter graduation date by before/after -->
  <div>
    <%= form.label :date_filter, "Filter By", class: "form-label" %>
    <%= form.radio_button 'search[date_filter]', 'before' %> Before
    <%= form.radio_button 'search[date_filter]', 'after' %> After
  </div>

  <!-- Dropdown to select the number of students per page -->
  <div>
    <%= form.label :per_page, "Students per page", class: "form-label" %>
    <%= form.select 'per_page', [5, 10, 20], { selected: params[:per_page] || 10 }, class: "form-control" %>
  </div>

  <!-- Submit button for search -->
  <div>
    <%= form.submit "Search", class: "btn btn-primary" %>
  </div>
<% end %>

<!-- Show All button to display all students -->
<div>
  <%= link_to "Show All", students_path(show_all: true), class: "btn btn-secondary" %>
</div>

<!-- Instruction text to guide the user -->
<div>
  <p>Please enter search criteria to find students.</p>
</div>

<!-- Display students if a search is performed or "Show All" is clicked -->
<% if @students.any? %>
  <div id="students">
    <table class="table">
      <thead>
      <tr>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Major</th>
        <th>Graduation Date</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
      <% @students.each do |student| %>
        <tr>
          <td><%= student.first_name %></td>
          <td><%= student.last_name %></td>
          <td><%= student.major %></td>
          <td><%= student.graduation_date.strftime('%B %d, %Y') if student.graduation_date %></td>
          <td>
            <%= link_to 'Show', student_path(student), class: 'btn btn-info' %>
            <%= link_to 'Edit', edit_student_path(student), class: 'btn btn-warning' %>
            <%= link_to 'Delete', student_path(student), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' %>
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>

    <!-- Pagination links -->
    <div class="pagination">
      <%= will_paginate @students %>
    </div>
  </div>
<% else %>
  <p>No students found. Please enter search criteria to find students.</p> <!-- Message displayed when no students are found -->
<% end %>

<%= link_to "New student", new_student_path, class: "btn btn-success" %> <!-- Link to create a new student -->